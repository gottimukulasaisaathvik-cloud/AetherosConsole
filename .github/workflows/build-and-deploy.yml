name: Build and Deploy

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3
      
      - name: Ensure index.html exists
        run: |
          if [ ! -f "index.html" ]; then
            echo "Creating default index.html"
            cat > index.html << 'EOF'
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aetheros Console</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0d1117;
            color: #c9d1d9;
        }
        h1 { color: #58a6ff; }
        a { color: #58a6ff; text-decoration: none; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <h1>Aetheros Console - Space Settlement Design Analytics</h1>
    <p>Welcome to the Aetheros Console dashboard.</p>
    <p>This is the analytics and visualization platform for the Aetheros space settlement design project.</p>
    <p><a href="README.html">View Documentation</a></p>
</body>
</html>
EOF
          else
            echo "✓ index.html already exists"
          fi
          ls -lah index.html
      
      - name: Verify deployment files
        run: |
          echo "Checking for deployment files..."
          test -f "index.html" && echo "✓ index.html present" || echo "✗ index.html missing"
          echo "Repository root contents:"
          ls -la
